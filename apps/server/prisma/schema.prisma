generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider     = "postgresql"
  url          = env("DATABASE_URL")
  relationMode = "prisma"
}

model Category {
  id   String  @id @default(cuid())
  name String  @unique
  icon String?
  products  Products[] 
  @@map("categories")
}

model User {
  id       String   @id @default(cuid())
  email    String   @unique
  fullName String?
  age      Int?
  avatar   String?
  phone    String?
  password String
  Post     Post[]
  @@map("users")
}

enum PublishType {
  PUBLIC
  FRIENDS
  FRIENDS_EXCEPT
  ONLY_ME
  SPECIFIC_FRIENDS
  CUSTOM
}

model Post {
  id       String   @id @default(cuid())
  user     User?    @relation(fields: [userId], references: [id])
  userId   String?
  content  String?
  location String?
  media    String[]
  createdAt   DateTime    @default(now())
  updatedAt   DateTime    @updatedAt
  publishType PublishType @default(PUBLIC)

  @@index([userId])
  @@map("posts")
}

model Products {
  id          String    @id @default(cuid())
  categoryId  String    // Khai báo trường này để lưu trữ ID của Category
  category    Category  @relation(fields: [categoryId], references: [id], onDelete: Cascade)
  name        String ?
  price       Int?
  description String?
  location    String?
  img String?
  @@index([categoryId])
}

